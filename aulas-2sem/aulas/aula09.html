<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aula 09 – Processamento Distribuido | FIAP</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/theme/white.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/monokai.css" />
  <link rel="stylesheet" href="../assets/css/fiap-theme.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="reveal">
    <div class="slides">

      <!-- ==================== SLIDE: CAPA FIAP ==================== -->
      <section class="cover-slide">
        <img src="../assets/img/fiap-logo-graduacao.png" alt="FIAP Graduação" class="fiap-logo-full" />
      </section>

      <!-- ==================== SLIDE: TÍTULO DA AULA ==================== -->
      <section class="title-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="title-card">
          <div class="accent-bar"></div>
          <h1>Processamento Distribuído</h1>
          <h2>AULA 09</h2>
          <h3>Data: 14/04/2026</h3>
        </div>
        <div class="lesson-bar">09 - Processamento Distribuido</div>
      </section>

      <!-- ==================== SLIDE: AGENDA ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Agenda</h2>
        </div>
        <table>
          <thead>
            <tr><th>Bloco</th><th>Horário</th><th>Conteúdo</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Bloco 1</strong></td><td>19h30 – 21h00</td><td>Mensageria, RabbitMQ, Dead Letter Queue, Idempotência, Azure Service Bus, Caso real iFood</td></tr>
            <tr><td><strong>Intervalo</strong></td><td>21h00 – 21h20</td><td>☕ Pausa</td></tr>
            <tr><td><strong>Bloco 2</strong></td><td>21h20 – 22h45</td><td>Exercício hands-on RabbitMQ com Docker, Producer/Consumer Node.js + Quiz</td></tr>
          </tbody>
        </table>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">3</div>
        </div>
      </section>

      <!-- ==================== SLIDE: SEÇÃO 1 - MENSAGERIA ==================== -->
      <section class="section-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="accent-bar"></div>
        <h2>Mensageria</h2>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">4</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Mensageria - Point-to-Point vs Pub/Sub ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Mensageria: Point-to-Point vs Pub/Sub</h2>
        </div>
        <ul>
          <li><strong>Point-to-Point:</strong> Mensagens enviadas para uma fila exclusiva, consumidas por apenas um consumidor.</li>
          <li><strong>Publish/Subscribe (Pub/Sub):</strong> Mensagens publicadas em tópicos/exchanges, entregues para múltiplos consumidores assinantes.</li>
          <li>Ambos facilitam a desacoplagem e escalabilidade dos sistemas distribuídos.</li>
        </ul>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">5</div>
        </div>
      </section>

      <!-- ==================== SLIDE: RabbitMQ - Exchanges, Queues e Bindings ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>RabbitMQ: Exchanges, Queues e Bindings</h2>
        </div>
        <ul>
          <li><strong>Exchanges:</strong> Direcionam mensagens para filas. Tipos principais:
            <ul>
              <li><strong>Direct:</strong> Roteamento por chave exata.</li>
              <li><strong>Topic:</strong> Roteamento por padrões de chave.</li>
              <li><strong>Fanout:</strong> Envia para todas filas ligadas (broadcast).</li>
            </ul>
          </li>
          <li><strong>Queues:</strong> Armazenam mensagens até serem consumidas.</li>
          <li><strong>Bindings:</strong> Associação entre exchanges e filas, definindo regras de roteamento.</li>
        </ul>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">6</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Código Exemplo - Criar Exchange Direct em Java/Spring Boot ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Exemplo: Exchange Direct em Java/Spring Boot</h2>
        </div>
        <pre><code class="language-java">
// Configuração RabbitMQ com Exchange Direct
@Bean
DirectExchange directExchange() {
    return new DirectExchange("app.direct.exchange");
}

@Bean
Queue queue() {
    return new Queue("app.queue");
}

@Bean
Binding binding(Queue queue, DirectExchange exchange) {
    return BindingBuilder.bind(queue).to(exchange).with("routing.key");
}
        </code></pre>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">7</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Dead Letter Queue (DLQ) ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Dead Letter Queue (DLQ)</h2>
        </div>
        <ul>
          <li>Filas especiais que armazenam mensagens não processadas ou rejeitadas após tentativas.</li>
          <li>Permitem análise e tratamento posterior de mensagens problemáticas.</li>
          <li>Configuração comum para melhorar confiabilidade e monitoramento.</li>
        </ul>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">8</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Idempotência de Consumidores ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Idempotência de Consumidores</h2>
        </div>
        <ul>
          <li>Consumidores devem processar mensagens de forma que múltiplas execuções não causem efeitos adversos.</li>
          <li>Evita problemas em casos de redelivery ou duplicação.</li>
          <li>Exemplos: uso de identificadores únicos, controle de transações, logs de processamento.</li>
        </ul>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">9</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Azure Service Bus como alternativa gerenciada ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Azure Service Bus</h2>
        </div>
        <ul>
          <li>Plataforma de mensageria gerenciada da Microsoft Azure.</li>
          <li>Suporta filas, tópicos, assinaturas e DLQ integrados.</li>
          <li>Alta disponibilidade, escalabilidade e integração com outros serviços Azure.</li>
          <li>Ideal para arquiteturas distribuídas em nuvem.</li>
        </ul>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">10</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Caso real - iFood ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Caso Real: iFood e Processamento de Pedidos</h2>
        </div>
        <p>O iFood processa milhares de pedidos por segundo usando filas para garantir:</p>
        <ul>
          <li>Orquestração de etapas do pedido (pagamento, separação, entrega).</li>
          <li>Desacoplamento entre serviços e escalabilidade horizontal.</li>
          <li>Uso intensivo de RabbitMQ para mensageria confiável e DLQ para falhas.</li>
          <li>Idempotência para evitar duplicidade em processamento em ambientes distribuídos.</li>
        </ul>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">11</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Quiz 1 - DLQ ==================== -->
      <section data-quiz data-correct="b" class="quiz-slide content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Quiz: Dead Letter Queue (DLQ)</h2>
        </div>
        <p>Qual a principal função da Dead Letter Queue?</p>
        <ul>
          <li><label><input type="radio" name="q1" value="a" /> Armazenar mensagens processadas com sucesso.</label></li>
          <li><label><input type="radio" name="q1" value="b" /> Armazenar mensagens que não puderam ser processadas.</label></li>
          <li><label><input type="radio" name="q1" value="c" /> Enviar mensagens para todos os consumidores simultaneamente.</label></li>
          <li><label><input type="radio" name="q1" value="d" /> Garantir a ordem de entrega das mensagens.</label></li>
        </ul>
        <div class="quiz-feedback">
          <p><strong>Resposta correta:</strong> b) Armazenar mensagens que não puderam ser processadas.</p>
          <p>A DLQ é usada para guardar mensagens rejeitadas ou que falharam no processamento para análise posterior.</p>
        </div>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">12</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Quiz 2 - Point-to-Point vs Pub/Sub ==================== -->
      <section data-quiz data-correct="a" class="quiz-slide content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Quiz: Point-to-Point vs Pub/Sub</h2>
        </div>
        <p>Qual a diferença principal entre Point-to-Point e Pub/Sub?</p>
        <ul>
          <li><label><input type="radio" name="q2" value="a" /> Point-to-Point envia para um consumidor; Pub/Sub para múltiplos assinantes.</label></li>
          <li><label><input type="radio" name="q2" value="b" /> Pub/Sub usa filas exclusivas; Point-to-Point usa tópicos.</label></li>
          <li><label><input type="radio" name="q2" value="c" /> Point-to-Point suporta broadcast; Pub/Sub não.</label></li>
          <li><label><input type="radio" name="q2" value="d" /> Não há diferença, são sinônimos.</label></li>
        </ul>
        <div class="quiz-feedback">
          <p><strong>Resposta correta:</strong> a) Point-to-Point envia para um consumidor; Pub/Sub para múltiplos assinantes.</p>
          <p>Point-to-Point entrega a mensagem para um único consumidor; Pub/Sub permite múltiplos consumidores receberem a mesma mensagem.</p>
        </div>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">13</div>
        </div>
      </section>

      <!-- ==================== SLIDE: INTERVALO ==================== -->
      <section class="break-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="break-title">
          <h2>Intervalo</h2>
          <p>21h00 – 21h20</p>
          <p>☕ Aproveite para descansar e se preparar para o próximo bloco</p>
        </div>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">14</div>
        </div>
      </section>

      <!-- ==================== SLIDE: SEÇÃO 2 - EXERCÍCIO HANDS-ON ==================== -->
      <section class="section-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="accent-bar"></div>
        <h2>Exercício Hands-on</h2>
        <h3>Montagem e uso do RabbitMQ com Docker e Node.js</h3>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">15</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Exercício - Configurar RabbitMQ com Docker ==================== -->
      <section class="exercise-slide content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Passo 1: Rodar RabbitMQ com Docker</h2>
        </div>
        <div class="exercise-container">
          <div class="exercise-steps">
            <ol>
              <li>Abra o terminal e execute:
                <pre><code class="language-bash">docker run -d --hostname my-rabbit --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3-management</code></pre>
              </li>
              <li>Acesse o painel web em <code>http://localhost:15672</code> (usuário: guest, senha: guest).</li>
              <li>Verifique se o RabbitMQ está ativo e funcionando.</li>
            </ol>
          </div>
        </div>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">16</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Exercício - Criar Producer e Consumer em Node.js ==================== -->
      <section class="exercise-slide content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Passo 2: Criar Producer e Consumer em Node.js</h2>
        </div>
        <div class="exercise-container">
          <div class="exercise-steps">
            <ol>
              <li>Instale a biblioteca amqplib:
                <pre><code class="language-bash">npm install amqplib</code></pre>
              </li>
              <li>Producer (publisher.js):
                <pre><code class="language-javascript">
const amqp = require('amqplib');

async function send() {
  const conn = await amqp.connect('amqp://localhost');
  const channel = await conn.createChannel();
  const queue = 'fila_teste';

  await channel.assertQueue(queue, { durable: true });
  const msg = 'Olá RabbitMQ!';

  channel.sendToQueue(queue, Buffer.from(msg));
  console.log("Mensagem enviada:", msg);

  setTimeout(() => {
    channel.close();
    conn.close();
  }, 500);
}

send().catch(console.error);
                </code></pre>
              </li>
              <li>Consumer (consumer.js):
                <pre><code class="language-javascript">
const amqp = require('amqplib');

async function receive() {
  const conn = await amqp.connect('amqp://localhost');
  const channel = await conn.createChannel();
  const queue = 'fila_teste';

  await channel.assertQueue(queue, { durable: true });
  console.log("Aguardando mensagens...");

  channel.consume(queue, msg => {
    if (msg !== null) {
      console.log("Mensagem recebida:", msg.content.toString());
      channel.ack(msg);
    }
  });
}

receive().catch(console.error);
                </code></pre>
              </li>
            </ol>
          </div>
        </div>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">17</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Exercício - Testar a publicação e consumo ==================== -->
      <section class="exercise-slide content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Passo 3: Testar publicação e consumo</h2>
        </div>
        <div class="exercise-container">
          <div class="exercise-steps">
            <ol>
              <li>Abra dois terminais.</li>
              <li>Em um, execute o consumer:
                <pre><code class="language-bash">node consumer.js</code></pre>
              </li>
              <li>No outro, envie mensagens:
                <pre><code class="language-bash">node publisher.js</code></pre>
              </li>
              <li>Observe as mensagens sendo recebidas em tempo real.</li>
            </ol>
          </div>
        </div>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">18</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Quiz 3 - Idempotência ==================== -->
      <section data-quiz data-correct="c" class="quiz-slide content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Quiz: Idempotência no consumo de mensagens</h2>
        </div>
        <p>Por que é importante que consumidores sejam idempotentes?</p>
        <ul>
          <li><label><input type="radio" name="q3" value="a" /> Para melhorar a velocidade do processamento.</label></li>
          <li><label><input type="radio" name="q3" value="b" /> Para garantir que mensagens nunca sejam perdidas.</label></li>
          <li><label><input type="radio" name="q3" value="c" /> Para evitar efeitos colaterais em caso de processamento duplicado.</label></li>
          <li><label><input type="radio" name="q3" value="d" /> Para permitir que mensagens sejam consumidas por múltiplos consumidores ao mesmo tempo.</label></li>
        </ul>
        <div class="quiz-feedback">
          <p><strong>Resposta correta:</strong> c) Para evitar efeitos colaterais em caso de processamento duplicado.</p>
          <p>Idempotência evita que o mesmo processamento repetido cause problemas como duplicidade no banco de dados.</p>
        </div>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">19</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Caso real - Código Exemplo C# .NET Producer ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Producer .NET/C# Exemplo</h2>
        </div>
        <pre><code class="language-csharp">
// Enviar mensagem RabbitMQ em .NET
var factory = new ConnectionFactory() { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "fila_teste",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

string message = "Olá do .NET!";
var body = Encoding.UTF8.GetBytes(message);

channel.BasicPublish(exchange: "",
                     routingKey: "fila_teste",
                     basicProperties: null,
                     body: body);

Console.WriteLine("Mensagem enviada: {0}", message);
        </code></pre>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">20</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Caso real - Código Exemplo Node.js Consumer ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Consumer Node.js Exemplo</h2>
        </div>
        <pre><code class="language-javascript">
const amqp = require('amqplib');

async function consume() {
  const conn = await amqp.connect('amqp://localhost');
  const channel = await conn.createChannel();
  const queue = 'fila_teste';

  await channel.assertQueue(queue, { durable: true });
  channel.consume(queue, msg => {
    if (msg) {
      console.log("Mensagem recebida:", msg.content.toString());
      channel.ack(msg);
    }
  });
}

consume().catch(console.error);
        </code></pre>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">21</div>
        </div>
      </section>

      <!-- ==================== SLIDE: Dúvidas? ==================== -->
      <section class="content-slide">
        <div class="top-bar"></div>
        <img src="../assets/img/fiap-logo-simple.png" alt="FIAP" class="fiap-logo-header" />
        <div class="slide-title-area">
          <div class="accent-bar"></div>
          <h2>Dúvidas ou curiosidades?</h2>
        </div>
        <div style="display:flex; align-items:center; justify-content:center; flex:1; font-size:4em; color: var(--fiap-dark); font-weight:800; opacity:0.15; margin-top:40px;">
          ?
        </div>
        <div class="slide-footer">
          <div class="footer-bar">09 - Processamento Distribuido</div>
          <div class="footer-page">22</div>
        </div>
      </section>

      <!-- ==================== SLIDE: ENCERRAMENTO ==================== -->
      <section class="end-slide">
        <img src="../assets/img/fiap-logo-graduacao.png" alt="FIAP Graduação" style="max-width:350px;" />
        <div class="copyright">
          Copyright &copy; 2026<br />
          Prof.º José Romualdo da Costa Filho<br /><br />
          Todos direitos reservados. Reprodução ou divulgação total ou parcial<br />
          deste documento é expressamente proibido sem o consentimento formal,<br />
          por escrito, do Professor (autor).
        </div>
      </section>

    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/highlight.js"></script>
  <script src="../assets/js/fiap-quiz.js"></script>
  <script>
    Reveal.initialize({
      hash: true,
      slideNumber: false,
      width: 1280,
      height: 720,
      margin: 0,
      minScale: 0.2,
      maxScale: 2.0,
      center: false,
      transition: 'slide',
      transitionSpeed: 'default',
      scrollActivationWidth: null,
      view: null,
      plugins: [RevealHighlight]
    });
  </script>
</body>
</html>